# Concourse deploy

# makes a lot of volumes *sigh*
persistence:
  enabled: false

# don't deploy new pg instance, we'll use ours
postgresql:
  enabled: false

web:
  ingress:
    enabled: true
    hosts:
      - build.timbrook.dev
    annotations:
      kubernetes.io/ingress.class: traefik

concourse:
  web:
    externalUrl: https://build.timbrook.dev/
    localAuth:
      enabled: false
    auth:
      duration: 3h
      github:
        enabled: true
      mainTeam:
        github:
          user: 7imbrook
          org: []
          team: []
    postgres:
      host: private-personal-site-managed-do-user-3469191-0.db.ondigitalocean.com
      port: 25061
      database: consource_pool
      sslmode: require

    kubernetes:
      enabled: false
    vault:
      ## Use Hashicorp Vault for the Credential Manager.
      enabled: true
      url: http://vault.core.svc.cluster.local:8200
      insecureSkipVerify: true
      authBackend: approle
      pathPrefix: /concourse

worker:
  replicas: 1
  baggageclaim:
    driver: btrfs
